<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template"/>
        <meta name="author" content="GeeksLabs"/>
        <meta name="keyword" content="Creative, Inicio, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal"/>
        <link rel="shortcut icon" href="img/favicon.png"/>

        <title>Sistema Prestamos - Prestamos</title>

        <!-- Bootstrap CSS -->    
        <link href="../resources/plantilla_prestamo/css/bootstrap.min.css" rel="stylesheet"/>
        <!-- bootstrap theme -->
        <link href="../resources/plantilla_prestamo/css/bootstrap-theme.css" rel="stylesheet"/>
        <!--external css-->
        <!-- font icon -->
        <link href="../resources/plantilla_prestamo/css/elegant-icons-style.css" rel="stylesheet" />
        <link href="../resources/plantilla_prestamo/css/font-awesome.min.css" rel="stylesheet" />    
        <!-- full calendar css-->
        <link href="../resources/plantilla_prestamo/assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet" />
        <link href="../resources/plantilla_prestamo/assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" />
        <!-- easy pie chart-->
        <link href="../resources/plantilla_prestamo/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
        <!-- owl carousel -->
        <link rel="stylesheet" href="../resources/plantilla_prestamo/css/owl.carousel.css" type="text/css"/>
        <link href="../resources/plantilla_prestamo/css/jquery-jvectormap-1.2.2.css" rel="stylesheet"/>
        <!-- Custom styles -->
        <link rel="stylesheet" href="../resources/plantilla_prestamo/css/fullcalendar.css"/>
        <link href="../resources/plantilla_prestamo/css/widgets.css" rel="stylesheet"/>
        <link href="../resources/plantilla_prestamo/css/style.css" rel="stylesheet"/>
        <link href="../resources/plantilla_prestamo/css/style-responsive.css" rel="stylesheet" />
        <link href="../resources/plantilla_prestamo/css/xcharts.min.css" rel=" stylesheet"/>	
        <link href="../resources/plantilla_prestamo/css/jquery-ui-1.10.4.min.css" rel="stylesheet"/>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
          <script src="js/lte-ie7.js"></script>
        <![endif]-->
    </h:head>

    <h:body onload="comprobarMensaje(#{frmPrestamo.estado}, '#{frmPrestamo.titulo}', '#{frmPrestamo.mensaje}');
            #{frmPrestamo.inicializar()};">
        <!-- container section start -->
        <section id="container" class="">


            <header class="header dark-bg">
                <div class="toggle-nav">
                    <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"><i class="icon_menu"></i></div>
                </div>

                <!--logo start-->
                <a href="index.jsf" class="logo">Sistema <span class="lite">Prestamo</span></a>
                <!--logo end-->

                <div class="nav search-row" id="top_menu">
                    <!--  search form start -->
                    <ul class="nav top-menu">                    
                        <li>
                            <form class="navbar-form">

                            </form>
                        </li>                    
                    </ul>
                    <!--  search form end -->                
                </div>

                <div class="top-nav notification-row">                
                    <!-- notificatoin dropdown start-->
                    <ul class="nav pull-right top-menu">

                        <!-- task notificatoin start -->

                        <!-- task notificatoin end -->
                        <!-- inbox notificatoin start-->

                        <!-- inbox notificatoin end -->
                        <!-- alert notification start-->

                        <!-- user login dropdown end -->
                    </ul>
                    <!-- notificatoin dropdown end-->
                </div>
            </header>      
            <!--header end-->

            <!--sidebar start-->
            <aside>
                <div id="sidebar"  class="nav-collapse ">
                    <!-- sidebar menu start-->
                    <ul class="sidebar-menu">                
                        <li class="active">
                            <a class="" href="index.jsf">
                                <i class="icon_house_alt"></i>
                                <span>Inicio</span>
                            </a>
                        </li>
                        <li class="sidebar-menu">
                            <a  class="" href="prestamos.jsf">
                                <i class="icon_document_alt"></i>
                                <span>Prestamos</span>
                            </a>
                        </li>
                        <!--li class="sidebar-menu">
                            <a  class="" href="pagos.jsf">
                                <i class="icon_documents_alt"></i>
                                <span>Pagos</span>
                            </a>
                        </li-->
                        <li class="sidebar-menu">
                            <a  class="" href="clientes.jsf">
                                <i class="icon_desktop"></i>
                                <span>Clientes</span>
                            </a>
                        </li>

                    </ul>
                    <!-- sidebar menu end-->
                </div>
            </aside>
            <!--sidebar end-->



            <!--main content start-->
            <section id="main-content">
                <section class="wrapper">            
                    <!--overview start-->
                    <div class="row">
                        <div class="col-lg-12">
                            <h3 class="page-header"><i class="fa fa-laptop"></i> Prestamos</h3>
                            <ol class="breadcrumb">
                                <li><i class="fa fa-home"></i><a href="index.jsf">Home</a></li>
                                <li><i class="fa fa-laptop"></i>Prestamos</li>						  	
                            </ol>
                        </div>
                    </div>






                    <!--AQUI EL CAMPO DE BUSQUEDA-->
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="panel-body">

                                <h:form class="form-validate form-horizontal" id="feedback_form">
                                    <div class="form-group ">
                                        <label for="cname" class="control-label col-lg-4">Buscar Por Cliente</label>
                                        <div class="col-lg-6">
                                            <h:inputText value="#{frmPrestamo.parametro}" class="form-control" id="cname"/>
                                        </div>
                                        <td>
                                            <h:commandButton value="Buscar" title="Buscar Por Clientes" class="btn btn-default col-lg-2" actionListener="#{frmPrestamo.buscarPorCliente()}"/>
                                        </td>
                                    </div>

                                </h:form>


                            </div>

                        </div>
                        <div class="col-lg-5"></div>
                        <div class="col-lg-2">
                            <div class="panel-body">

                                <form class="form-validate form-horizontal" id="feedback_form" method="get" action="">
                                    <div class="form-group ">
                                        <td><a class="btn btn-default col-lg-12" href="registrar_prestamo.jsf" title="Nuevo Préstamo">Nuevo Préstamo</a></td>

                                    </div>

                                </form>


                            </div>

                        </div>
                    </div>

                    <!--COMIENZO DE TOOOOOOOOOOOOOOOOODOOOO LA TABLA -->
                    <h:form>
                        <section>
                            <div class="row">
                                <div class="col-lg-12">
                                    <section class="panel">
                                        <header class="panel-heading">
                                            Historial de Prestamos
                                        </header>

                                        <h:dataTable class="table table-striped table-advance table-hover"
                                                     value="#{frmPrestamo.listaPrestamo}" var="r">
                                            <h:column>
                                                <f:facet name="header">Nº Prestamo</f:facet>
                                                    #{r.idPrestamo}
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">DUI</f:facet>
                                                <i><b style="font-size: 16px">#{r.dui.dui}</b></i>
                                            </h:column>

                                            <h:column>
                                                <f:facet name="header">Cliente</f:facet>
                                                <i><b style="font-size: 16px">#{r.dui.nombres} #{r.dui.apellidos}</b></i>
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Monto</f:facet>
                                                $
                                                <h:outputText value="#{r.monto}">
                                                    <f:convertNumber maxFractionDigits="2"></f:convertNumber>
                                                </h:outputText>
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Saldo</f:facet>
                                                $
                                                <h:outputText value="#{r.saldo}">
                                                    <f:convertNumber maxFractionDigits="2"></f:convertNumber>
                                                </h:outputText>
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Estado</f:facet>
                                                    #{(r.estado == 1)?"Pendiente":"Cancelado"}
                                            </h:column>
                                            <h:column>
                                                <h:commandLink type="submit" title="Ver Detalle" class="btn btn-primary icon-reorder tooltips" action="prestamo.jsf" actionListener="#{frmPrestamo.setRegistro(r)}"><i class="icon_book_alt"></i></h:commandLink>
                                                <h:commandLink title="Realizar Pago" class="btn btn-success icon-reorder tooltips" action="registrar_pago.jsf" disabled="#{(r.estado==2)?true:false}" actionListener="#{frmPrestamo.setModificar(r)}"><i class="icon_plus_alt2"></i></h:commandLink>
                                            </h:column>
                                        </h:dataTable>
                                    </section>
                                </div>
                            </div>
                        </section>
                    </h:form>
                    <!-- page endFINAL DE TOOOOOOOOODO-->




                </section>
            </section>
            <!--main content end-->
        </section>
        <!-- container section start -->

        <!-- javascripts -->
        <script src="../resources/plantilla_prestamo/js/jquery.scrollTo.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.nicescroll.js" type="text/javascript"></script>
        <!-- chartjs -->
        <script src="../resources/plantilla_prestamo/assets/chart-master/Chart.js"></script>
        <!-- custom chart script for this page only-->
        <script src="../resources/plantilla_prestamo/js/chartjs-custom.js"></script>

        <!-- javascripts -->
        <script src="../resources/plantilla_prestamo/js/jquery.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery-ui-1.10.4.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="../resources/plantilla_prestamo/js/jquery-ui-1.9.2.custom.min.js"></script>
        <!-- bootstrap -->
        <script src="../resources/plantilla_prestamo/js/bootstrap.min.js"></script>
        <!-- nice scroll -->
        <script src="../resources/plantilla_prestamo/js/jquery.scrollTo.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.nicescroll.js" type="text/javascript"></script>
        <!-- charts scripts -->
        <script src="../resources/plantilla_prestamo/assets/jquery-knob/js/jquery.knob.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.sparkline.js" type="text/javascript"></script>
        <script src="../resources/plantilla_prestamo/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script>
        <script src="../resources/plantilla_prestamo/js/owl.carousel.js" ></script>
        <!-- jQuery full calendar -->
        <script src="../resources/plantilla_prestamo/js/fullcalendar.min.js"></script> <!-- Full Google Calendar - Calendar -->
        <script src="../resources/plantilla_prestamo/assets/fullcalendar/fullcalendar/fullcalendar.js"></script>
        <!--script for this page only-->
        <script src="../resources/plantilla_prestamo/js/calendar-custom.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.rateit.min.js"></script>
        <!-- custom select -->
        <script src="../resources/plantilla_prestamo/js/jquery.customSelect.min.js" ></script>
        <script src="../resources/plantilla_prestamo/assets/chart-master/Chart.js"></script>

        <!--custome script for all page-->
        <script src="../resources/plantilla_prestamo/js/scripts.js"></script>
        <!-- custom script for this page-->
        <script src="../resources/plantilla_prestamo/js/sparkline-chart.js"></script>
        <script src="../resources/plantilla_prestamo/js/easy-pie-chart.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery-jvectormap-1.2.2.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery-jvectormap-world-mill-en.js"></script>
        <script src="../resources/plantilla_prestamo/js/xcharts.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.autosize.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.placeholder.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/gdp-data.js"></script>	
        <script src="../resources/plantilla_prestamo/js/morris.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/sparklines.js"></script>	
        <script src="../resources/plantilla_prestamo/js/charts.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.slimscroll.min.js"></script>

        <script src="../resources/plantilla_prestamo/js/bootstrap-growl.min.js"></script>

        <script>

        //knob
        $(function () {
            $(".knob").knob({
                'draw': function () {
                    $(this.i).val(this.cv + '%')
                }
            })
        });

        //carousel
        $(document).ready(function () {
            $("#owl-slider").owlCarousel({
                navigation: true,
                slideSpeed: 300,
                paginationSpeed: 400,
                singleItem: true

            });
        });

        //custom select box

        $(function () {
            $('select.styled').customSelect();
        });

        /* ---------- Map ---------- */
        $(function () {
            $('#map').vectorMap({
                map: 'world_mill_en',
                series: {
                    regions: [{
                            values: gdpData,
                            scale: ['#000', '#000'],
                            normalizeFunction: 'polynomial'
                        }]
                },
                backgroundColor: '#eef3f7',
                onLabelShow: function (e, el, code) {
                    el.html(el.html() + ' (GDP - ' + gdpData[code] + ')');
                }
            });
        });

        //Mnesaje
        function comprobarMensaje(tipo, titulo, mensaje) {
            if (tipo == 1) { // éxito
                $.growl({
                    title: titulo,
                    message: mensaje
                }, {
                    type: 'success'
                });
            } else if (tipo == 2) { // error al agregar
                /*
                 window.location.href = "registrar_cliente.jsf";
                 $.growl({
                 title: titulo,
                 message: mensaje
                 }, {
                 type: 'danger'
                 });
                 */
            }
        }

        </script>

    </h:body>
</html>

