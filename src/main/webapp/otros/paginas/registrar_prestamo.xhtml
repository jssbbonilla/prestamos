<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template"/>
        <meta name="author" content="GeeksLabs"/>
        <meta name="keyword" content="Creative, Inicio, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal"/>
        <link rel="shortcut icon" href="img/favicon.png"/>

        <title>Sistema Prestamos - Registro de Prestamo</title>

        <!-- Bootstrap CSS -->    
        <link href="../resources/plantilla_prestamo/css/bootstrap.min.css" rel="stylesheet"/>
        <!-- bootstrap theme -->
        <link href="../resources/plantilla_prestamo/css/bootstrap-theme.css" rel="stylesheet"/>
        <!--external css-->
        <!-- font icon -->
        <link href="../resources/plantilla_prestamo/css/elegant-icons-style.css" rel="stylesheet" />
        <link href="../resources/plantilla_prestamo/css/font-awesome.min.css" rel="stylesheet" />
        <!-- Custom styles -->
        <link href="../resources/plantilla_prestamo/css/style.css" rel="stylesheet"/>
        <link href="../resources/plantilla_prestamo/css/style-responsive.css" rel="stylesheet" />

        <link rel="stylesheet" href="../resources/plantilla_prestamo/css/datepicker.css"/>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
          <script src="js/lte-ie7.js"></script>
        <![endif]-->
    </h:head>

    <h:body onload="comprobarMensaje(#{frmPrestamo.estado}, '#{frmPrestamo.titulo}', '#{frmPrestamo.mensaje}')">
        <!-- container section start -->
        <section id="container" class="">


            <header class="header dark-bg">
                <div class="toggle-nav">
                    <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"><i class="icon_menu"></i></div>
                </div>

                <!--logo start-->
                <a href="index.jsf" class="logo">Sistema <span class="lite">Prestamo</span></a>
                <!--logo end-->

                <div class="nav search-row" id="top_menu">
                    <!--  search form start -->
                    <ul class="nav top-menu">                    
                        <li>
                            <form class="navbar-form">

                            </form>
                        </li>                    
                    </ul>
                    <!--  search form end -->                
                </div>

                <div class="top-nav notification-row">                
                    <!-- notificatoin dropdown start-->
                    <ul class="nav pull-right top-menu">

                        <!-- task notificatoin start -->

                        <!-- task notificatoin end -->
                        <!-- inbox notificatoin start-->

                        <!-- inbox notificatoin end -->
                        <!-- alert notification start-->

                        <!-- user login dropdown end -->
                    </ul>
                    <!-- notificatoin dropdown end-->
                </div>
            </header>      
            <!--header end-->

            <!--sidebar start-->
            <aside>
                <div id="sidebar"  class="nav-collapse ">
                    <!-- sidebar menu start-->
                    <ul class="sidebar-menu">                
                        <li class="active">
                            <a class="" href="index.jsf">
                                <i class="icon_house_alt"></i>
                                <span>Inicio</span>
                            </a>
                        </li>
                        <li class="sidebar-menu">
                            <a  class="" href="prestamos.jsf">
                                <i class="icon_document_alt"></i>
                                <span>Prestamos</span>
                            </a>
                        </li>
                        <!--li class="sidebar-menu">
                            <a  class="" href="pagos.jsf">
                                <i class="icon_documents_alt"></i>
                                <span>Pagos</span>
                            </a>
                        </li-->
                        <li class="sidebar-menu">
                            <a  class="" href="clientes.jsf">
                                <i class="icon_desktop"></i>
                                <span>Clientes</span>
                            </a>
                        </li>

                    </ul>
                    <!-- sidebar menu end-->
                </div>
            </aside>
            <!--sidebar end-->

            <!--main content start-->
            <section id="main-content">
                <section class="wrapper">
                    <div class="row">
                        <div class="col-lg-12">
                            <h3 class="page-header"><i class="fa fa fa-bars"></i> Registrar Prestamo</h3>
                            <ol class="breadcrumb">
                                <li><i class="fa fa-home"></i><a href="index.jsf">Home</a></li>
                                <li><i class="fa fa-square-o"></i>Registrar Prestamo</li>
                            </ol>
                        </div>
                    </div>
                    <!-- page start-->

                    <h1 style="margin: 5px;">Datos</h1><br/>



                    <h:form id="form" class="form-horizontal" role="form">

                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Cliente</label>
                            <div class="col-lg-7">
                                <h:selectOneListbox size="1" value="#{frmPrestamo.dui}" class="form-control m-bot10">
                                    <f:selectItems value="#{frmCliente.listaClientes}" var="r" itemLabel="#{r.nombres} #{r.apellidos}" itemValue="#{r.dui}">
                                    </f:selectItems>
                                </h:selectOneListbox>
                            </div>
                        </div>

                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Monto Total</label>

                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtMonto" value="#{frmPrestamo.nuevo.monto}" required="true" requiredMessage="Ingrese el monto del préstamo." validatorMessage="Ingrese un monto válido." converterMessage="Ingrese un formato de dato válido.">
                                    <f:validateDoubleRange minimum="1" maximum="1000000"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtMonto" style="color:red;margin:8px;" />
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">N° de Cuotas</label>
                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtCuotas" value="#{frmPrestamo.nuevo.cantidadCuotas}" required="true" requiredMessage="Ingrese la cantidad de cuotas del préstamo." validatorMessage="Ingrese una cantidad de cuotas válida." converterMessage="Ingrese un formato de dato válido.">
                                    <f:validateLongRange minimum="1"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtCuotas" style="color:red;margin:8px;" />
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Fecha Inicio</label>
                            <div class="col-lg-7">
                                <h:inputText class="form-control datepicker" id="txtInicio" value="#{frmPrestamo.nuevo.fechaInicio}" required="true" requiredMessage="Ingrese la fecha de inicio del pŕestamo." converterMessage="Ingrese un formato de dato válido.">
                                    <f:convertDateTime pattern="dd/MMM/yyyy"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtInicio" style="color:red;margin:8px;" />
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Tasa de Interés</label>
                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtInteres" value="#{frmPrestamo.nuevo.tasaInteres}" required="true" requiredMessage="Ingrese la tasa de intéres del préstamo." validatorMessage="Ingrese una tasa de interés válida." converterMessage="Ingrese un formato de dato válido.">
                                    <f:validateDoubleRange minimum="0.0001" maximum="1"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtInteres" style="color:red;margin:8px;" />
                        </div>

                        <br/>
                        <div class="row" style="margin-bottom: 5px;">
                            <div class="col-lg-offset-5 col-lg-10"> 
                                <h:commandButton value="Calcular Valores" class="btn btn-info btn-lg btn-primary" actionListener="#{frmPrestamo.datosNuevo()}"/>
                            </div>
                        </div>  
                        <br/>

                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Valor Cuotas</label>

                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtValorCuota" value="#{frmPrestamo.nuevo.valorCuota}" readonly="true" required="true" requiredMessage="Calcule el valor de la cuota.">
                                    <f:convertNumber maxFractionDigits="2"/>
                                    <f:validateDoubleRange minimum="1"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtValorCuota" style="color:red;margin:8px;" />
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Fecha Fin</label>
                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtFin" value="#{frmPrestamo.nuevo.fechaFin}" readonly="true" required="true" requiredMessage="Calcule la fecha del nuevo préstamo.">
                                    <f:convertDateTime pattern="dd/MMM/yyyy"/>
                                </h:inputText>
                            </div>
                            <h:message for="txtFin" style="color:red;margin:8px;" />
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <label class="col-lg-2 control-label">Capitalización</label>
                            <div class="col-lg-7">
                                <h:inputText class="form-control" id="txtCapitalizacion" value="Mensual" readonly="true"/>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 5px;">
                            <div class="col-lg-offset-5 col-lg-10">
                                <!-- Trigger the modal with a button -->
                                <h:commandButton value="Registrar Préstamo" class="btn btn-info btn-lg btn-primary" actionListener="#{frmPrestamo.agregar()}"/>
                            </div>
                        </div>  
                    </h:form>


                    <div class="row" style="margin-bottom: 5px;">
                        <div class="col-lg-offset-5 col-lg-10">
                            <!-- Trigger the modal with a button -->
                            <!--button type="button" class="btn btn-info btn-lg btn-primary" data-toggle="modal" data-target="#myModal">Registrar Prestamo</button-->

                            <!-- Modal -->
                            <div id="myModal" class="modal fade" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h4 class="modal-title">Confirmación</h4>
                                        </div>
                                        <div class="modal-body">
                                            <p>¿Está seguro que desea registrar el prestamo con esta informacion?</p>
                                            <p>DUI del Cliente: 12345678-9</p>
                                            <p>Nombre Completo: Rodolfo Olmos</p>
                                            <p>Nº de Cuotas: 12</p>
                                            <p>Monto Total: 2000</p>
                                            <p>Fecha Inicio: 14/09/2016</p>
                                            <p>Fecha Fin: 14/09/2017</p>


                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="window.location.href = 'prestamos.html'">Aceptar</button>

                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- page end-->
                </section>
            </section>
            <!--main content end-->
        </section>
        <!-- container section end -->
        <!-- javascripts -->
        <!--script src="../resources/plantilla_prestamo/js/bootstrap-growl.min.js"></script-->
        <script src="../resources/plantilla_prestamo/js/jquery.js"></script>
        <script src="../resources/plantilla_prestamo/js/bootstrap.min.js"></script>
        <!-- nice scroll -->
        <script src="../resources/plantilla_prestamo/js/jquery.scrollTo.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery.nicescroll.js" type="text/javascript"></script><!--custome script for all page-->
        <!--script src="../resources/plantilla_prestamo/js/scripts.js"></script-->

        <script src="../resources/plantilla_prestamo/js/bootstrap-growl.min.js"></script>
        <script src="../resources/plantilla_prestamo/js/jquery-ui-1.12.1.js"></script>

        <script type="text/javascript">
                                                function comprobarMensaje(tipo, titulo, mensaje) {
                                                    if (tipo == 1) {
                                                        window.location.href = "prestamos.jsf";
                                                    } else if (tipo == 2) {
                                                        $.growl({
                                                            title: titulo,
                                                            message: mensaje
                                                        }, {
                                                            type: 'danger'
                                                        });
                                                    }
                                                }



                                                $(function () {
                                                    $(".datepicker").datepicker({ dateFormat: 'dd/M/yy' });
                                                });

        </script>

    </h:body>
</html>


